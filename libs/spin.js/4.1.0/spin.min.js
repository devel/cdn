var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},defaults={lines:12,length:7,width:5,radius:10,scale:1,corners:1,color:"#000",fadeColor:"transparent",animation:"spinner-line-fade-default",rotate:0,direction:1,speed:1,zIndex:2e9,className:"spinner",top:"50%",left:"50%",shadow:"0 0 1px transparent",position:"absolute"},Spinner=function(){function Spinner(opts){void 0===opts&&(opts={}),this.opts=__assign(__assign({},defaults),opts)}return Spinner.prototype.spin=function(target){return this.stop(),this.el=document.createElement("div"),this.el.className=this.opts.className,this.el.setAttribute("role","progressbar"),css(this.el,{position:this.opts.position,width:0,zIndex:this.opts.zIndex,left:this.opts.left,top:this.opts.top,transform:"scale("+this.opts.scale+")"}),target&&target.insertBefore(this.el,target.firstChild||null),drawLines(this.el,this.opts),this},Spinner.prototype.stop=function(){return this.el&&(("undefined"!=typeof requestAnimationFrame?cancelAnimationFrame:clearTimeout)(this.animateId),this.el.parentNode&&this.el.parentNode.removeChild(this.el),this.el=void 0),this},Spinner}();function css(el,props){for(var prop in props)el.style[prop]=props[prop];return el}function getColor(color,idx){return"string"==typeof color?color:color[idx%color.length]}function drawLines(el,opts){var borderRadius=Math.round(opts.corners*opts.width*500)/1e3+"px",shadow="none";!0===opts.shadow?shadow="0 2px 4px #000":"string"==typeof opts.shadow&&(shadow=opts.shadow);for(var shadows=parseBoxShadow(shadow),i=0;i<opts.lines;i++){var degrees=~~(360/opts.lines*i+opts.rotate),backgroundLine=css(document.createElement("div"),{position:"absolute",top:-opts.width/2+"px",width:opts.length+opts.width+"px",height:opts.width+"px",background:getColor(opts.fadeColor,i),borderRadius:borderRadius,transformOrigin:"left",transform:"rotate("+degrees+"deg) translateX("+opts.radius+"px)"}),delay=i*opts.direction/opts.lines/opts.speed;delay-=1/opts.speed;var line=css(document.createElement("div"),{width:"100%",height:"100%",background:getColor(opts.color,i),borderRadius:borderRadius,boxShadow:normalizeShadow(shadows,degrees),animation:1/opts.speed+"s linear "+delay+"s infinite "+opts.animation});backgroundLine.appendChild(line),el.appendChild(backgroundLine)}}function parseBoxShadow(boxShadow){for(var regex=/^\s*([a-zA-Z]+\s+)?(-?\d+(\.\d+)?)([a-zA-Z]*)\s+(-?\d+(\.\d+)?)([a-zA-Z]*)(.*)$/,shadows=[],_i=0,_a=boxShadow.split(",");_i<_a.length;_i++){var matches=_a[_i].match(regex);if(null!==matches){var x=+matches[2],y=+matches[5],xUnits=matches[4],yUnits=matches[7];0!=x||xUnits||(xUnits=yUnits),0!=y||yUnits||(yUnits=xUnits),xUnits===yUnits&&shadows.push({prefix:matches[1]||"",x:x,y:y,xUnits:xUnits,yUnits:yUnits,end:matches[8]})}}return shadows}function normalizeShadow(shadows,degrees){for(var normalized=[],_i=0,shadows_1=shadows;_i<shadows_1.length;_i++){var shadow=shadows_1[_i],xy=convertOffset(shadow.x,shadow.y,degrees);normalized.push(shadow.prefix+xy[0]+shadow.xUnits+" "+xy[1]+shadow.yUnits+shadow.end)}return normalized.join(", ")}function convertOffset(x,y,degrees){var radians=degrees*Math.PI/180,sin=Math.sin(radians),cos=Math.cos(radians);return[Math.round(1e3*(x*cos+y*sin))/1e3,Math.round(1e3*(-x*sin+y*cos))/1e3]}